### i18n - 国际化

i18n 插件提供多语言支持，支持自动语言检测、翻译文件管理和全局翻译函数。

#### 基本配置

```typescript
import { i18n } from "@dreamer/dweb/plugins";

app.plugin(
  i18n({
    languages: [
      { code: "en-US", name: "English" },
      { code: "zh-CN", name: "中文" },
    ],
    defaultLanguage: "en-US",
    translationsDir: "locales",
    detection: {
      fromCookie: true, // 从 Cookie 检测语言
      fromHeader: false, // 默认不启用 Accept-Language 头检测
      fromQuery: true, // 从查询参数检测（如 ?lang=en）
      fromPath: false, // 从 URL 路径检测（如 /en/page）
    },
  }),
);
```

#### 翻译文件结构

翻译文件应放在 `translationsDir` 目录下，文件名格式为 `{语言代码}.json`：

```json
// locales/en-US.json
{
  "common": {
    "welcome": "Hello, World!",
    "greeting": "Hello, {name}!"
  },
  "validation": {
    "required": "{field} is required"
  }
}
```

```json
// locales/zh-CN.json
{
  "common": {
    "welcome": "你好，世界！",
    "greeting": "你好，{name}！"
  },
  "validation": {
    "required": "{field} 是必填字段"
  }
}
```

#### 使用翻译函数

**方式 1：全局 `$t()` 函数（推荐）**

无需导入，全局可用：

```typescript
// 在任何地方直接使用
console.log($t("common.welcome"));
const message = $t("common.greeting", { name: "John" });
```

**方式 2：通过 `LoadContext` 或 `PageProps`**

```typescript
// routes/index.tsx
export async function load({ t }: LoadContext) {
  const message = t("common.welcome");
  return { message };
}

export default function HomePage({ t }: PageProps) {
  return <div>{t("common.welcome")}</div>;
}
```

**方式 3：使用 `getI18n()` 函数**

```typescript
import { getI18n } from "@dreamer/dweb/plugins";

const t = getI18n();
const message = t("common.welcome");
```

#### 语言检测优先级

1. URL 路径（如 `/en/page`）- 需要启用 `fromPath: true`
2. 查询参数（如 `?lang=en`）- 需要启用 `fromQuery: true`
3. Cookie - 需要启用 `fromCookie: true`
4. Accept-Language 头 - 需要启用 `fromHeader: true`
5. 默认语言（配置中的 `defaultLanguage`）

#### 更多信息

详细使用说明请参考 [i18n 使用文档](./i18n-model-usage.md)。
